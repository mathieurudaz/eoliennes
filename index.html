<!DOCTYPE html>
<html lang="fr" class="loading">

<head>
    <meta charset="UTF-8">
    <meta name="author" content="24heures">
    <title>Lorem ipsum dolor sit amet</title>
    <meta name="description" content="Fusce lacus est lobortis eu erat nec">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="keywords" content="24heures">
    <meta property="og:title" content="Fusce lacus est lobortis eu erat nec" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="http://www.24heures.ch/extern/interactive_wch/insectes/share_image.jpg" />
    <meta property="og:url" content="http://www.24heures.ch/extern/interactive_wch/insectes" />
    <meta property="og:description" content="Fusce lacus est lobortis eu erat nec" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:creator" content="@24heuresch" />
    <meta name="twitter:site" content="@24heuresch" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.2.0/css/bootstrap-slider.min.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/header.css">
    <link rel="stylesheet" type="text/css" href="css/footer.css">
    <link rel="stylesheet" type="text/css" href="css/spinner.css">
    <link rel="stylesheet" type="text/css" href="css/slider.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/iCheck/1.0.2/skins/minimal/pink.css" />
    <link rel="stylesheet" href="https://cdn.materialdesignicons.com/2.1.19/css/materialdesignicons.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,500,600,700" rel="stylesheet">
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.css' rel='stylesheet' />
</head>

<body>
    <!-- Analytics -->
    <!-- NetMetrix -->
    <script language="JavaScript" type="text/javascript">
    <!-- var WEMF2 = "http://newsnetz.wemfbox.ch/cgi-bin/ivw/CP/24heures/"; if (navigator.userAgent.match(/iPad/gi)) {WEMF2 = "http://newsnetz.wemfbox.ch/cgi-bin/ivw/CP/24heures/mobile/tablet/web/"; } document.write("<img src='" + WEMF2 + "home?r=" + escape(document.referrer) + "&d=" + (Math.random() * 100000) + " ' width='1' height='1' style='display:none !important;' alt='' />"); // -->
    </script>
    <noscript> <img src="http://newsnetz.wemfbox.ch/cgi-bin/ivw/CP/24heures/home" width="1" height="0" alt="" style="display:none !important"> </noscript>
    <script language="JavaScript" type="text/javascript">
    <!-- var WEMF = "http://24heures.wemfbox.ch/cgi-bin/ivw/CP/"; if (navigator.userAgent.match(/iPad/gi)) {WEMF = "http://24heures.wemfbox.ch/cgi-bin/ivw/CP/mobile/tablet/web/"; } document.write("<img src='" + WEMF + "home?r=" + escape(document.referrer) + "&d=" + (Math.random() * 100000) + "' width='1' style='display:none !important;' height='1' alt='' />"); // -->
    </script>
    <noscript><img src="http://24heures.wemfbox.ch/cgi-bin/ivw/CP/home" width="1" height="0" alt="" style="display:none !important"></noscript>
    <script language="Javascript">
    var szmvars = "24heures//CP//home";
    </script>
    <script language="Javascript" src="http://24heures.wemfbox.ch/2004/01/survey.js"></script>
    <!-- End NetMetrix -->
    <!-- Google Tag Manager -->
    <script>
    window.dataLayer = window.dataLayer || [];
    </script>
    <script>
    if (!window.googleTagManagerStarted) {
        window.googleTagManagerStarted = true;
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-TTDLSJ');
    }
    </script>
    <script>
    var storyId = "",
        premium = "",
        pageType = "article",
        category = "Long format",
        subcategory = "default";
    var uid = undefined;
    try {
        uid = JSON.parse(document.querySelector("meta[name='c1_user_info']").getAttribute("content")).user_id;
    } catch (err) {
        uid = undefined;
    }
    window.dataLayer.push({
        "event": "pageview",
        "pagetype": pageType,
        "category": (category) ? category : "default",
        "subcategory": (subcategory) ? subcategory : "default",
        "article_id": (storyId) ? storyId : undefined,
        "uid": uid,
        "premium": (premium) ? premium : undefined
    });
    </script>
    <!-- End Google Tag Manager -->
    <!-- End Anlytics -->
    <div class="loader vertical-center">
        <img src="24h_logo_full_white.svg">
    </div>
    <nav class="navbar navbar-default navbar-fixed-top navfade">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://www.24heures.ch">
                </a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-center">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Toutes les sections <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#chapitre-1">Section 1</a></li>
                            <li><a href="#chapitre-2">Section 2</a></li>
                            <li><a href="#chapitre-3">Section 3</a></li>
                        </ul>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a onclick="window.open(this.href, '_blank', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false" href="https://www.facebook.com/sharer/sharer.php?u=http%3A//www.24heures.ch/extern/interactive_wch/insectes"><i class="mdi mdi-facebook"></i></a></li>
                    <li><a onclick="window.open(this.href, '_blank', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false" href="http://twitter.com/intent/tweet?text=A vos insectes, prêts, dégustez! http://insectes.24heures.ch"><i class="mdi mdi-twitter"></i></a></li>
                    <li><a href="mailto:?&amp;subject=24heures - A vos insectes, prêts, dégustez!&amp;body=Dès le 1er mai, les Suisses pourront légalement acheter et consommer trois insectes différents. Zoom dans nos assiettes. http://insectes.24heures.ch"><i class="mdi mdi-email"></i></a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container intro">
        <!--<div class="pale_animate"></div>-->
        <div class="row">
            <div class="col-md-offset-1 col-md-10">
                <img src="subhead.gif" style="width: 100px; height: auto;">
                <h2 class="colorized">Vaud et Régions - éoliennes</h2>
                <h1>Nous avons cartographié tous les projets éoliens du canton.<br/>Voici ce que vous pourriez voir.</h1>
                <div class="author">Egestas Condimentum, Aliquet Ullamcorper</div>
                <div class="publication_date">mars 2018</div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <p>Ut felis nunc, lobortis ac lorem sit amet, egestas condimentum eros. Aenean egestas sodales nisi, non congue libero laoreet eget. Selon la stratégie cantonale, l'objectif de développement de l'énergie éolienne devrait atteindre <b class="colorized">12%</b> à <b class="colorized">25%</b> de la consommation d'électricité 2008 du canton. Mauris pellentesque nisi eu tortor aliquet ullamcorper. Sed vestibulum orci sapien, vel dictum erat consectetur eget. Vivamus purus sapien, <b>blandit id orci non, interdum cursus erat</b>.</p>
            </div>
        </div>
    </div>
    <div class="container text-left">
        <!--<div class="row">
            <div class="col-md-offset-2 col-md-8">
                <div class="special lg">Des éoliennes visibles de chez vous?</div>
            </div>
        </div>-->
        <div class="row" style="margin-top: 20px;">
            <div class="col-md-offset-1 col-md-10">
                <input id="pac-input" class="controls" type="text" placeholder="Votre adresse">
                <div class="special xs">Essayez par exemple <a href="#">Lausanne</a>, <a href="#">Parc de Sauvabelin</a>, <a href="#">Col des Mosses</a> ou <a href="#">Lac de Joux</a>.</div>
                <div class="special xs">Seules les adresses situées dans le canton de Vaud sont prises en compte.</div>
            </div>
        </div>
        <div class="row message_container text-center" style="margin-top: 40px; margin-bottom: 40px;">
            <div class="col-md-offset-3 col-md-6">
                <div><div class="spinner lds-ring"><div></div><div></div><div></div><div></div></div></div>
                <div class="message">Il y a de fortes chances pour que vous puissiez voir
                <br/><b class="special">6 éoliennes</b></div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <p>Ut felis nunc, lobortis ac lorem sit amet, egestas condimentum eros. Aenean egestas sodales nisi, non congue libero laoreet eget. Phasellus est sem, feugiat nec tempus nec, vestibulum quis leo. Sed posuere feugiat quam, congue finibus magna mollis in. <b>Nunc id magna id massa facilisis vulputate</b> nec et nulla. Sed vestibulum orci sapien, vel dictum erat consectetur eget.</p>
            </div>
        </div>
    </div>
    <div class="container" style="margin-top: 60px;">
        <div class="row text-center">
            <div class="col-md-offset-1 col-md-10">
                <h2>Les projets de parcs éoliens</h2>
                <div id="parcs-container">
                    <img src="map_1-parks.png" style="width: 100%; height: auto;">
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <p>Ut felis nunc, lobortis ac lorem sit amet, egestas condimentum eros. Aenean egestas sodales nisi, non congue libero laoreet eget. Phasellus est sem, feugiat nec tempus nec, vestibulum quis leo. Sed posuere feugiat quam, congue finibus magna mollis in. Sed vestibulum orci sapien, vel dictum erat consectetur eget. <b>Voici ce que vous pourriez voir, <span class="colorized">en 2034,</span> si tous les parcs étaient construits.</b></p>
            </div>
        </div>
    </div>
    <div class="container " style="margin-top: 60px; margin-bottom: 0px;padding-bottom: 0px;">
        <div class="row text-center">
            <div class="col-md-offset-1 col-md-10">
                <h2>Jusqu'où les éoliennes seront visibles</h2>
                <div class="viewshed-legend">
                    <div class="legend-bloc">
                        <div class="legend-text">Eoliennes visibles</div>
                        <div class="legend-color" style="background:url(viewshed_legend_2.png)"></div>
                        <!--<div class="legend-subtext">
                            <div class="legend-sub-text">&le;5</div>
                            <div class="legend-sub-text">&gt;5</div>
                            <div class="legend-sub-text">&gt;15</div>
                        </div>-->
                    </div>
                    <!--<div class="legend-bloc">
                        <div class="legend-text">Impact visuel</div>
                        <div class="legend-color"><img src="viewshed_legend_1.png"></div>
                    </div>-->
                    <!--<div class="legend-bloc">
                        <div class="legend-text">Forêt</div>
                        <div class="legend-subtext">Visibilité nulle</div>
                        <div class="legend-color"><img src="viewshed_legend_2.png"></div>
                    </div>-->
                </div>
                <div id="viewshed-container">
                    <img src="map_2-viewshedc.png" style="width: 100%; height: auto;">
                    <svg version="1.1" id="user-arrow" 
                        xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xml:space="preserve"
                        x="0px" y="0px" 
                        viewBox="0 0 55 28">
                        <style type="text/css">
                            .st0{fill:none;stroke:#000000;stroke-miterlimit:10;}
                        </style>
                        <path class="st0" d="M3.9,22.3C8.6,13.7,21.8-2,54.3,2.3"/>
                        <polygon points="8,22.9 1.6,27.5 0.9,19.7"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row text-left">
            <div class="col-md-offset-1 col-md-10">
                <div class="row">
                    <div class="col-md-4">
                        <img src="zoom-1.png">
                        <div class="zoom-text">
                            <p class="special md light"><b>Chemin pédestre - tour du lac de Joux</b> turpis. Mauris pellentesque nisi eu tortor aliquet ullamcorper. Sed posuere feugiat quam, congue finibus magna mollis in. Sed vestibulum orci sapien, vel dictum erat consectetur eget.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <img src="zoom-2.png">
                        <div class="zoom-text">
                            <p class="special md light"><b>Concentration importante</b> Mauris pellentesque nisi eu tortor aliquet ullamcorper. Sed posuere feugiat quam, congue finibus magna mollis in. Sed vestibulum orci sapien, vel dictum erat consectetur eget.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <img src="zoom-3.png">
                        <div class="zoom-text">
                            <p class="special md light"><b>Lac léman</b> turpis. Mauris pellentesque nisi eu tortor aliquet ullamcorper. Sed posuere feugiat quam, congue finibus magna mollis in. Sed vestibulum orci sapien, vel dictum erat consectetur eget.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container section">
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <p>Le choix des sites propices à la construction d'éoliennes dépend de la vitesse des vents à hauteur de rotor, des zones d'exclusions et des périmètres des villes alentours.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-3 col-md-6 encadre">
                <div class="encadre-text-container">
                    <div class="encadre-pic"></div>
                    <div class="encadre-header">Titre article A, lien nouvelle fenêtre vers article 24heures</div>
                    <div class="encadre-subheader">Nunc id magna id massa facilisis vulputate nec et nulla. Sed vestibulum orci sapien, vel dictum erat consectetur</div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <p>L'Atlas des vents de la Suisse décrit les conditions de vent à cinq hauteurs au-dessus du niveau du sol à 150m au dessus du sol (hauteur moyenne de rotor). Les indications représentent une estimation grossière des conditions de vent. En cas d'intérêt pour développer un site, il est indispensable d'effectuer des mesures sur place.</p>
            </div>
        </div>
    </div>
    <div class="container image" style="padding-bottom: 0px; padding-top: 0px;">
        <div class="row text-center">
            <div class="col-md-offset-2 col-md-8">
                <h2>Le choix des emplacements</h2>
                <div class="windatlas-legend">
                    <div class="legend-bloc">
                        <div class="legend-text">vitesse moyenne des vents à 150m</div>
                        <div class="legend-color">
                            <div class="legend-sub-color"></div>
                        </div>
                        <div class="legend-subtext">
                            <div class="legend-sub-text">&ge;6.0 m/s</div>
                        </div>
                    </div>
                </div>
                <div id="windatlas-container">
                    <img src="windatlas_red.png">
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row text-left">
            <div class="col-md-offset-1 col-md-10">
                <div class="row">
                    <div class="col-md-4">
                        <div class="small_simple_map">
                            <div class="small_simple_map_text">
                                <div class="small_map_text" id="small_map_lausanne">Lausanne</div>
                                <div class="small_map_text" id="small_map_yverdon">Yverdon</div>
                            </div>
                            <img src="exclusion_small_1_red.png">
                        </div>
                        <div class="zoom-text">
                            <p class="special md light"><b>Texte zones protégées</b>. Aliquam non imperdiet turpis. Mauris pellentesque nisi eu tortor aliquet ullamcorper. Sed posuere feugiat quam, congue finibus magna mollis in. Sed vestibulum orci sapien, vel dictum erat consectetur eget.</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="small_simple_map">
                            <div class="small_simple_map_text">
                                <div class="small_map_text" id="small_map_lausanne" style="top:8%;">Aérodrome de Payerne</div>
                                <div class="small_map_text" id="small_map_yverdon" style="top:20%;">Radar de Torny</div>
                            </div>
                            <img src="exclusion_small_2_red.png">
                        </div>
                        <div class="zoom-text">
                            <p class="special md light"><b>Zone tampon autour de l'aérodrome de Payerne et du radar de Torny</b> Un rayon de 20km Interférences avec les radars des Forces aériennes. Le Département de la défence (DDPS) parle «d’obstacles à la navigation aérienne» et de «conséquences sur les systèmes de radars».</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="small_simple_map">
                            <div class="small_simple_map_text">
                                <div class="small_map_text" id="small_map_lausanne">Aérodrome de Payerne</div>
                                <div class="small_map_text" id="small_map_yverdon">Radar de Torny</div>
                            </div>
                            <img src="exclusion_small_3_red.png">
                        </div>
                        <div class="zoom-text">
                            <p class="special md light"><b>Texte villes?</b> Aliquam non imperdiet turpis. Mauris pellentesque nisi eu tortor aliquet ullamcorper. Sed posuere feugiat quam, congue finibus magna mollis in. Sed vestibulum orci sapien, vel dictum erat consectetur eget.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container section" style="margin-top: 20px;">
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <p>Ut felis nunc, lobortis ac lorem sit amet, egestas condimentum eros. Aenean egestas sodales nisi, non congue libero laoreet eget. Phasellus est sem, feugiat nec tempus nec, vestibulum quis leo. Aliquam non imperdiet turpis. Mauris pellentesque nisi eu tortor aliquet ullamcorper. Sed posuere feugiat quam, congue finibus magna mollis in. Nunc id magna id massa facilisis vulputate nec et nulla. Sed vestibulum orci sapien, vel dictum erat consectetur eget. Vivamus purus sapien, <b>blandit id orci non, interdum cursus erat</b>.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-3 col-md-6 encadre">
                <div class="encadre-text-container">
                    <div class="encadre-pic"></div>
                    <div class="encadre-header">Titre Article B, lien nouvelle fenêtre vers article 24heures</div>
                    <div class="encadre-subheader">Nunc id magna id massa facilisis vulputate nec et nulla. Sed vestibulum orci sapien, vel dictum erat consectetur</div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <p>Ut felis nunc, lobortis ac lorem sit amet, egestas condimentum eros. Aenean egestas sodales nisi, non congue libero laoreet eget. Phasellus est sem, feugiat nec tempus nec, vestibulum quis leo. Aliquam non imperdiet turpis. Mauris pellentesque nisi eu tortor aliquet ullamcorper. Sed posuere feugiat quam, congue finibus magna mollis in. Nunc id magna id massa facilisis vulputate nec et nulla. Sed vestibulum orci sapien, vel dictum erat consectetur eget. Vivamus purus sapien, <b>blandit id orci non, interdum cursus erat</b>.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-3 col-md-6 encadre">
                <div class="encadre-text-container">
                    <div class="encadre-pic"></div>
                    <div class="encadre-header">Titre Article C, lien nouvelle fenêtre vers article 24heures</div>
                    <div class="encadre-subheader">Nunc id magna id massa facilisis vulputate nec et nulla. Sed vestibulum orci sapien, vel dictum erat consectetur</div>
                </div>
            </div>
        </div>
    </div>
    <div class="container section">
        <div class="row text-center">
            <div class="col-md-offset-3 col-md-6">
                <h2>Titre carte détaillée feugiat nec tempus</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <p>Ut felis nunc, lobortis ac lorem sit amet, egestas condimentum eros. Aenean egestas sodales nisi, non congue libero laoreet eget. Phasellus est sem, feugiat nec tempus nec, vestibulum quis leo. Aliquam non imperdiet turpis. Mauris pellentesque nisi eu tortor aliquet ullamcorper. Sed posuere feugiat quam, congue finibus magna mollis in. Nunc id magna id massa facilisis vulputate nec et nulla. Sed vestibulum orci sapien, vel dictum erat consectetur eget. Vivamus purus sapien, <b>blandit id orci non, interdum cursus erat</b>.</p>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8">
                <div id="mapbox" style="width: 100%;"></div>
            </div>
            <div class="col-md-4 mapbox-infobox">
                <div class="row mapbox-infobox-header">
                    <div class="col-md-12">
                        <h2>Afficher ou masquer des éléments</h2>
                    </div>
                    <div class="col-md-12">
                        <div class="mapbox-layers-panel">
                            <input type="checkBox" id="layer1" name="radio-group" data-layerid="Marais">
                            <label for="layer1">Hauts et bas marais</label>
                            <input type="checkBox" id="layer2" name="radio-group" data-layerid="Pro natura">
                            <label for="layer2">Réserves Pro Natura</label>
                            <input type="checkBox" id="layer3" name="radio-group" data-layerid="Districts francs">
                            <label for="layer3">Districts francs</label>
                            <input type="checkBox" id="layer4" name="radio-group" data-layerid="IFP">
                            <label for="layer4">Inventaire fédéral des paysages</label>
                            <input type="checkBox" id="layer5" name="radio-group" data-layerid="Parcs" checked>
                            <label for="layer5">Parcs suisses</label>
                            <input type="checkBox" id="layer6" name="radio-group" data-layerid="ISOS">
                            <label for="layer6">Sites construits d'importance nationale</label>
                            <input type="checkBox" id="layer7" name="radio-group" data-layerid="Radars">
                            <label for="layer7">Radars militaires</label>
                        </div>
                    </div>
                </div>
                <div class="row mapbox-section">
                    <div class="col-md-offset-1 col-md-10">
                        <div class="mapbox_section-content">
                            <div>
                                <h2>Parcs et réserves naturelles</h2>
                                <p>Curabitur scelerisque augue vel dignissim tempor. Sed semper blandit luctus. Nulla imperdiet ut magna vitae lacinia. Cras vitae sapien ligula. Integer mollis leo et scelerisque venenatis. Etiam sed leo sollicitudin, condimentum turpis eget, ullamcorper lacus. Proin vitae augue ligula.</p>
                                <p>Curabitur scelerisque augue vel dignissim tempor. Sed semper blandit luctus. Nulla imperdiet ut magna vitae lacinia. Cras vitae sapien ligula. Integer mollis leo et scelerisque venenatis. Etiam sed leo sollicitudin, condimentum turpis eget, ullamcorper lacus. Proin vitae augue ligula.</p>
                                <p>Curabitur scelerisque augue vel dignissim tempor. Sed semper blandit luctus. Nulla imperdiet ut magna vitae lacinia. Cras vitae sapien ligula. Integer mollis leo et scelerisque venenatis. Etiam sed leo sollicitudin, condimentum turpis eget, ullamcorper lacus. Proin vitae augue ligula.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mapbox-section">
                    <div class="col-md-offset-1 col-md-10">
                        <div class="mapbox_section-content">
                            <div>
                                <h2>Districts francs</h2>
                                <p>Curabitur scelerisque augue vel dignissim tempor. Sed semper blandit luctus. Nulla imperdiet ut magna vitae lacinia. Cras vitae sapien ligula. Integer mollis leo et scelerisque venenatis. Etiam sed leo sollicitudin, condimentum turpis eget, ullamcorper lacus. Proin vitae augue ligula.</p>
                                <p>Curabitur scelerisque augue vel dignissim tempor. Sed semper blandit luctus. Nulla imperdiet ut magna vitae lacinia. Cras vitae sapien ligula. Integer mollis leo et scelerisque venenatis. Etiam sed leo sollicitudin, condimentum turpis eget, ullamcorper lacus. Proin vitae augue ligula.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mapbox-section">
                    <div class="col-md-offset-1 col-md-10">
                        <div class="mapbox_section-content">
                            <div>
                                <h2>Radars militaires</h2>
                                <p>Curabitur scelerisque augue vel dignissim tempor. Sed semper blandit luctus. Nulla imperdiet ut magna vitae lacinia. Cras vitae sapien ligula. Integer mollis leo et scelerisque venenatis. Etiam sed leo sollicitudin, condimentum turpis eget, ullamcorper lacus. Proin vitae augue ligula.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mapbox-section">
                    <div class="col-md-offset-1 col-md-10">
                        <div class="mapbox_section-content">
                            <div>
                                <h2>Sites construits d'importance nationale</h2>
                                <p>Curabitur scelerisque augue vel dignissim tempor. Sed semper blandit luctus. Nulla imperdiet ut magna vitae lacinia. Cras vitae sapien ligula. Integer mollis leo et scelerisque venenatis. Etiam sed leo sollicitudin, condimentum turpis eget, ullamcorper lacus. Proin vitae augue ligula.</p>
                                <p>Curabitur scelerisque augue vel dignissim tempor. Sed semper blandit luctus. Nulla imperdiet ut magna vitae lacinia. Cras vitae sapien ligula. Integer mollis leo et scelerisque venenatis. Etiam sed leo sollicitudin, condimentum turpis eget, ullamcorper lacus. Proin vitae augue ligula.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mapbox-section">
                    <div class="col-md-offset-1 col-md-10">
                        <div class="mapbox_section-content">
                            <div>
                                <p>Curabitur scelerisque augue vel dignissim tempor. Sed semper blandit luctus. Nulla imperdiet ut magna vitae lacinia. Cras vitae sapien ligula. Integer mollis leo et scelerisque venenatis. Etiam sed leo sollicitudin, condimentum turpis eget, ullamcorper lacus. Proin vitae augue ligula.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container" style="margin-top: 90px;">
        <div class="row text-center">
            <div class="col-md-offset-3 col-md-6">
                <h2>Titre données techniques des parcs</h2>
            </div>
        </div>
    </div>
    <div class="container parcs">
        <div class="row">
            <div class="col-md-3 parc-bloc">
                <h3>Bavois</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>4</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Bel Coster</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>9</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Bière</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>7</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Bottens</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>3</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 parc-bloc">
                <h3>Chavanne sur Moudon</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>7</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Eoljoux</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>7</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>EolJorat Nord</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>4</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>EolJorat Sud</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>8</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 parc-bloc">
                <h3>Essertine-sur-Rolle</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>8</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Grandevent</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>7</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Grandsonnaz</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>17</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Grati</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>6</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 parc-bloc">
                <h3>Mollendruz</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>12</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Provence</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>17</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Tous-Vents</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>7</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Vaudair</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>6</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 parc-bloc">
                <h3>Villars-le-terroir</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>4</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Vuarrens</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>5</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
            <div class="col-md-3 parc-bloc">
                <h3>Ste-Croix</h3>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr><td>Commune(s)</td><td>La Praz, Juriens</td></tr>
                    <tr><td>Promoteur</td><td>Aliquam non</td></tr>
                    <tr><td>Eoliennes</td><td>6</td></tr>
                    <tr><td>Puissance totale</td><td>25 GW/h</td></tr>
                </table>
                <p>Remarques non congue libero laoreet eget</p>
            </div>
        </div>
    </div>
    <div class="container section" style="margin-top: 80px;">
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <h2>Méthodologie</h2>
                <p>Les zones de visiblité des éoliennes ont été calculées à partir d'une carte d'élévation du territoire <a href="#">Lien vers source 1</a>, des forêts issues d'Open Street Map. etc. Hauteur base-rotor, visibilité 10km</p>
                <p>Les promoteurs des parcs A, B, C, D, ayant refusé de nous donner l'emplacement de leurs futures éoliennes, nous avons placé aléatoirement un nombre de mâts équivalent aux données techniques de chaque parc dans leur périmètre, etc.</p>
                <p><a href="#">Lien vers source 1</a></p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <p>Ut felis nunc, lobortis ac lorem sit amet, egestas condimentum eros. Aenean egestas sodales nisi, non congue libero laoreet eget. Phasellus est sem, feugiat nec tempus nec, vestibulum quis leo.</p>
            </div>
        </div>
    </div>
    <div id="debug-map" style="display: block;"></div>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <table class="table">
                        <tbody>
                            <tr><th><b>Publication</b></th><td>01.04.2018</td></tr>
                            <tr><td><b>Textes</b></td><td>Sed Posuere</td></tr>
                            <tr><td><b>Réalisation</b></td><td>Aenean Egestas</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-md-6">
                    <b>Vous voulez communiquer un renseignement ou vous avez repéré une erreur?</b><br/>Envoyez-nous un <a href="mailto:24heures.web@sr.tamedia.ch">message.</a>
                </div>
            </div>
            <div class="row copyright">
                <div class="col-md-12"><a href="https://www.24heures.ch"><img src="24heures_small_black.svg">© 2018 24heures</a></div>
            </div>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.2.0/bootstrap-slider.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/js/swiper.jquery.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBgQ6KXHrB6tMqwK-xGL3FkqiTHG_7urcE&libraries=places&language=fr"></script>
    <script src="geocoding.js"></script>
    <script src="Windmap.js"></script>
    <script src="wind_flowfield/victor.min.js"></script>
    <script src="wind_flowfield/engine.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/iCheck/1.0.2/icheck.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/debug.addIndicators.min.js"></script>

    <script type="text/javascript">

        $(".loader").bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function() {
            $(this).remove();
        });

        $(window).on("scroll", function() {
            if ($(window).scrollTop() > $(window).height() - 50) {
                $(".navbar.navbar-default").removeClass("navfade");
            } else {
                $(".navbar.navbar-default").addClass("navfade");
            }
        })

        $("html").removeClass("loading");

        $(document).ready(function() {

            $('input').iCheck({
                checkboxClass: 'icheckbox_minimal-pink',
                radioClass: 'iradio_minimal-pink',
                increaseArea: '20%'
            });

        });

    </script>

    <script type="text/javascript">

        /**
         * Wind atlas
         */

         var windmap = new Windmap("#windatlas-container", function(){});

    </script>

    <script type="text/javascript">
    
        /**
         * Viewshed
         */

        var vsProjection = d3.geoMercator();
        var vdBounds = [[5.93719220465601, 46.1162024335589],
                        [7.34809579436735, 47.0150236028029]]

        var vsPath = d3.geoPath()
            .projection(vsProjection);

        var vsMarker
        var vsMarkerText


        // Fit the bounding box in the svg
        var vdWidth = $("#viewshed-container").width()
            vdHeight = vdWidth * 
            (vsProjection(vdBounds[0])[1] - vsProjection(vdBounds[1])[1]) /
            (vsProjection(vdBounds[1])[0] - vsProjection(vdBounds[0])[0]);

        vsProjection
            .scale(1)
            .translate([0, 0]);

        var vsb = [vsProjection(vdBounds[0]), vsProjection(vdBounds[1])]
            vss = 1 / Math.max((vsb[1][0] - vsb[0][0]) / vdWidth, (vsb[1][1] - vsb[0][1]) / vdHeight),
            vst = [(vdWidth - vss * (vsb[1][0] + vsb[0][0])) / 2, (vdHeight - vss * (vsb[1][1] + vsb[0][1])) / 2];

        vsProjection
            .scale(vss)
            .translate(vst);

        // Add a test map SVG container
        var viewshedSVG = d3.select("#viewshed-container").append("svg")
            .attr("id", "viewshed-map")
            .attr("width", vdWidth)
            .attr("height", vdHeight);

        // Add a test map SVG container
        var parksSVG = d3.select("#parks-container").append("svg")
            .attr("id", "parks-map")
            .attr("width", vdWidth)
            .attr("height", vdHeight);

        // Add parks labels layer SVG container
        var parksLabelsSVG = d3.select("#parcs-container").append("svg")
            .attr("id", "parks_labels-map")
            .attr("width", vdWidth)
            .attr("height", vdHeight);

        // Add the marker to the map
        vsMarker = viewshedSVG.append("circle")
            .attr("class", "user-circle")
            .attr("r", 2.5)

        vsMarkerText = viewshedSVG.append("text")
            .attr("class", "user-text")
            .text("Votre position")

        // Load the parks polygons
        d3.json("parcs_polygons-EPSG4326_quantized.topojson", function(error, vd) {
            if (error) throw error;

            // Add the geometries to the #2 MAP (viewshed)
            viewshedSVG.selectAll("path.park-catcher")
                .data(topojson.feature(vd, vd.objects.communes).features)
                .enter()
                .append("path")
                .attr("class", "park-catcher")
                .attr("d", vsPath)
                .on("mouseover", function(d){
                    console.log(d);
                    return viewshedSVG.selectAll(
                        ".viewshed-parc_label-id-" + d.properties.OBJECTID)
                            .style("visibility", "visible") })
                .on("mouseout", function(){
                    return viewshedSVG.selectAll(
                        "text.viewshed-parc_label")
                            .style("visibility", "hidden") });

                // Places name and coordinates
                var cities = [
                    {name: 'Yverdon', cord: [6.632, 46.775]},
                    {name: 'Montreux', cord: [6.914, 46.432]},
                    {name: 'Nyon', cord: [6.230, 46.383]},
                    {name: 'Orbe', cord: [6.540, 46.727]},
                    {name: 'Lausanne', cord: [6.62, 46.51]}
                ]

                // Draw places circles
                viewshedSVG.selectAll("circles")
                    .data(cities)
                    .enter()
                    .append('circle')
                    .attr("cx", 0)
                    .attr("cy", 0)
                    .attr('r', 4)
                    .attr("class", "windatlas-circle")
                    .attr("transform", function(d, i) {
                        return "translate(" + 
                            vsProjection(d.cord)[0] + "," + 
                            vsProjection(d.cord)[1] + ")";});

                // Draw places text
                viewshedSVG.selectAll("text.windatlas-label")
                    .data(cities)
                    .enter()
                    .append("text")
                    .attr("class", "windatlas-label")
                    .attr("x", 0)
                    .attr("y", 0)
                    .attr("transform", function(d, i) {
                        return "translate(" + 
                            vsProjection(d.cord)[0] + "," + 
                            vsProjection(d.cord)[1] + ")";})
                    .attr('text-anchor', 'middle')
                    .attr('dy', -8)
                    .text( function (d) { return d.name; });

        });        

        // Load the points
        d3.json("parcs_labels-EPSG4326.geojson", function(error, vd) {
            if (error) throw error;

            // Add the markers labels to the #2 MAP (viewshed)
            viewshedSVG.selectAll("text.viewshed-parc_label")
                .data(vd.features)
                .enter()
                .append("text")
                .attr("class", function(d){
                    return "viewshed-parc_label-id-" + d.properties.id + " viewshed-parc_label"})
                .attr("text-anchor", "middle")
                .text(function(d) {
                    return d.properties.name;
                })
                .attr("x", function(d) {
                    return vsProjection([
                        d.geometry.coordinates[0], 
                        d.geometry.coordinates[1]])[0];
                })
                .attr("y", function(d) {
                    return vsProjection([
                        d.geometry.coordinates[0],
                        d.geometry.coordinates[1]])[1] - 19;
                })

            // Add the markers sublabels to the #2 MAP (viewshed)
            viewshedSVG.selectAll("text.viewshed-parc_label.small")
                .data(vd.features)
                .enter()
                .append("text")
                .attr("class", function(d){
                    return "viewshed-parc_label-id-" + d.properties.id + " viewshed-parc_label small"})
                .attr("text-anchor", "middle")
                .text(function(d) {
                    return d.properties.count + " éoliennes";
                })
                .attr("x", function(d) {
                    return vsProjection([
                        d.geometry.coordinates[0],
                        d.geometry.coordinates[1]])[0];
                })
                .attr("y", function(d) {
                    return vsProjection([
                        d.geometry.coordinates[0],
                        d.geometry.coordinates[1]])[1] - 7;
                })

            // Add the markers labels to the #1 MAP (parcs)
            parksLabelsSVG.selectAll("text.parc_label")
                .data(vd.features)
                .enter()
                .append("text")
                .attr("class", function(d){
                    return "parc_label-id-" + d.properties.OBJECTID + " parc_label"})
                .attr("text-anchor", "start")
                .text(function(d) {
                    return d.properties.name;
                })
                .attr("x", function(d) {
                    return vsProjection([
                        d.geometry.coordinates[0],
                        d.geometry.coordinates[1]])[0];
                })
                .attr("y", function(d) {
                    return vsProjection([
                        d.geometry.coordinates[0],
                        d.geometry.coordinates[1]])[1];
                })

        });
    </script>

    <script type="text/javascript">

        /*
        $("#pac-input").on("keyup", function(){
            console.log("A")
        })

        var service = new google.maps.places.AutocompleteService();
        service.getPlacePredictions({ input: 'Lausanne' }, function(predictions){
            console.log(predictions)});
        */

        var projection = d3.geoMercator();
        var vdBounds = [[5.93719220465601, 46.1162024335589],
                        [7.34809579436735, 47.0150236028029]]


        var path = d3.geoPath()
            .projection(projection);

        var marker


        // Fit the bounding box in the svg
        
        var width = 2400
            height = width * 
            (projection(vdBounds[0])[1] - projection(vdBounds[1])[1]) /
            (projection(vdBounds[1])[0] - projection(vdBounds[0])[0]);

        projection
            .scale(1)
            .translate([0, 0]);

        var b = [projection(vdBounds[0]), projection(vdBounds[1])]
            s = 1 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height),
            t = [(width - s * (b[1][0] + b[0][0])) / 2, (height - s * (b[1][1] + b[0][1])) / 2];

        projection
            .scale(s)
            .translate(t);

        /**
         * DEBUG ONLY 
         */

        // Add a DEBUG map SVG container
        var svgDebug = d3.select("#debug-map").append("svg")
            .attr("id", "map_debug")
            .attr("width", width)
            .attr("height", height);

        // Load the DEBUG map geometry
        d3.json("comtest_quantized.topojson", function(error, vd) {
            if (error) throw error;

            // Add the geometries to the DEBUG map
            svgDebug.append("path")
                .datum(topojson.feature(vd, vd.objects.communes, function(a, b) { return a !== b; }))
                .attr("fill", "transparent")
                .attr("stroke", "#ff00ff")
                .attr("d", path);

            // Add the boundary box to the DEBUG map
            bounds = svgDebug.append("rect")
                .attr("fill", "rgba(0,0,0,0.2)")
                .attr( "stroke", "#ff00ff" )
                .attr( "stroke-width", "2" )
                .attr("x", projection(vdBounds[0])[0])
                .attr("y", projection(vdBounds[1])[1])
                .attr("width", projection(vdBounds[1])[0] - projection(vdBounds[0])[0])
                .attr("height", projection(vdBounds[0])[1] - projection(vdBounds[1])[1]);

            // Add the marker to the DEBUG map
            debugMarker = svgDebug.append("circle")
                .attr("fill", "transparent")
                .attr( "stroke-width", 1 )
                .attr( "stroke", " #ff00ff" )
                .attr("r", 5)

        });


        /**
         * Get position value from image
         */
        var canvas = document.createElement('canvas');
        var img = new Image()
        img.src = "viewshed.png"
        img.addEventListener('load', function(){
            canvas.width = img.width;
            canvas.height = img.height;
            ctx = canvas.getContext('2d')
            ctx.fillStyle = "#ff00ff";
            ctx.drawImage(img, 0, 0, img.width, img.height);
            $("#debug-map").append($(canvas));
        });

    </script>

    <script type="text/javascript">
        
        /**
         * MapBox
         */

        // Create the map
        $("#mapbox").css({ height: $(window).height() -51 })

        // Layers
        mapboxLayer = [
            "Marais",
            "IFP",
            "ISOS",
            "Parcs",
            "Pro natura",
            "Radars",
            "Districts francs"
        ];

        mapboxgl.accessToken = 'pk.eyJ1IjoibWF0aGlldXJ1ZGF6IiwiYSI6ImNpcW05cHNiMzAwMWloeG5rcHRlNHB5ZmUifQ.MElOP7joerjfI1OidI1G8g';
        var map = new mapboxgl.Map({
            container: 'mapbox',
            style: 'mapbox://styles/mathieurudaz/cj8ubima76j652ro4j8vcha18',
            center: [6.3747, 46.622],
            zoom: 8,
            pitch: 10
        });

        map.on('load', function(){
            // disable map zoom when using scroll
            map.scrollZoom.disable();
            // Add zoom and rotation controls to the map.
            map.addControl(new mapboxgl.NavigationControl(), 'top-left');
            // Fit the map to the bounding box
            map.fitBounds([[5.93719220465601, 46.1162024335589],
                        [7.34809579436735, 47.0150236028029]], {linear:true});

            console.log( map.getZoom() )

            for (var i = 0; i < mapboxLayer.length; i++) {
                map.setLayoutProperty(mapboxLayer[i], 'visibility', 'none');
            }

            // When a click event occurs on a feature in the states layer, open a popup at the
            // location of the click, with description HTML from its properties.
            for (var i = 0; i < mapboxLayer.length; i++) {
                map.on('click', mapboxLayer[i], function (e) {
                    new mapboxgl.Popup()
                        .setLngLat(e.lngLat)
                        .setHTML(e.features[0].properties.Name)
                        .addTo(map);
                });
            }

            map.on('click', "eoliennes_parcs", function (e) {
                new mapboxgl.Popup()
                    .setLngLat(e.lngLat)
                    .setHTML(e.features[0].properties.Name)
                    .addTo(map);
            });

            // Change the cursor to a pointer when the mouse is over the states layer.
            map.on('mouseenter', 'eoliennes_parcs', function () {
                map.getCanvas().style.cursor = 'pointer';
            });

            // Change it back to a pointer when it leaves.
            map.on('mouseleave', 'eoliennes_parcs', function () {
                map.getCanvas().style.cursor = '';
            });

            
            /**
             * Layers manager
             */

            $('.mapbox-layers-panel input').on('ifChecked', function(event){
                map.setLayoutProperty(this.dataset.layerid, 'visibility', 'visible');
            })

            $('.mapbox-layers-panel input').on('ifUnchecked', function(event){
                map.setLayoutProperty(this.dataset.layerid, 'visibility', 'none');
            })

        });

    </script>
    <script type="text/javascript">
        
        /**
         * ScrollMagic
         */

        // Set new ScrollMagic controller
        var controller = new ScrollMagic.Controller();

        $(".mapbox_section-content").css({ "min-height": $(window).height() - 51 })

        // Viewpoints to be reached on the map
        viewpoints = [
            [46.560949, 6.656657, 9, 0],
            [46.560949, 6.656657, 9, 0],
            [46.774402, 6.948789, 10, 30],
            [46.560949, 6.656657, 9, 0],
            [46.560949, 6.656657, 9, 0],
        ];

        layerGroups = [
            [0,1,3,4],
            [6],
            [5],
            [2]
        ]

        // create the scene
        new ScrollMagic.Scene({
                duration: $(".mapbox-infobox").height() - $("#mapbox").height(),
                offset: $("#mapbox").height() / 2 -25,
                triggerElement: $("#mapbox").get(0),
                triggerHook: "onCenter"
            })
            .setPin("#mapbox")
            //.addIndicators({ name: "Map container" })
            .addTo(controller);

        // Filters
        /*new ScrollMagic.Scene({
                duration: $(".mapbox-infobox").height() - $("#mapbox").height(),
                offset: $("#mapbox").height() / 2 -25,
                triggerElement: $("#mapbox").get(0),
                triggerHook: "onCenter"
            })
            .setPin(".mapbox-infobox-header", {pushFollower: false})
            .addTo(controller);*/


        $('.mapbox-section').each(function(index) {

            new ScrollMagic.Scene({ triggerElement: this, offset: $(this).height() / 3 })
                .on('start', function(e) {
                    map.flyTo({
                        center: [
                            viewpoints[index][1],
                            viewpoints[index][0]
                        ],
                        zoom: viewpoints[index][2],
                        pitch: viewpoints[index][3]
                    });

                    for (var i = 0; i < mapboxLayer.length; i++) {
                        map.setLayoutProperty(mapboxLayer[i], 'visibility', 'none');
                    }

                    for (var i = 0; i < layerGroups[index].length; i++) {
                        map.setLayoutProperty(mapboxLayer[layerGroups[index][i]], 'visibility', 'visible');
                    }

                    //map.setPaintProperty('protected-areas-topo-quantize-cmo4qm', 'fill-opacity', Math.random());
                })
                .on('leave', function(e) {
                    if( index < 1 ){
                        console.log( "First one" )
                    }else{
                        map.flyTo({
                            center: [
                                viewpoints[index-1][1],
                                viewpoints[index-1][0]
                            ],
                            zoom: viewpoints[index-1][2],
                            pitch: viewpoints[index-1][3]
                        });

                        for (var i = 0; i < mapboxLayer.length; i++) {
                            map.setLayoutProperty(mapboxLayer[i], 'visibility', 'none');
                        }

                        //map.setPaintProperty('protected-areas-topo-quantize-cmo4qm', 'fill-opacity', Math.random());
                    }
                })
                //.addIndicators({ name: "Section" })
                .addTo(controller);

        });

    </script>

</body>

</html>